/*!
* Clamp.js 0.5.1
*
* Copyright 2011-2013, Joseph Schmitt http://joe.sh
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/ window.$clamp=function(a,c){a=1==a.length?a[0]:a;var f,k,s=window,d={clamp:(c=c||{}).clamp||2,useNativeClamp:void 0===c.useNativeClamp||c.useNativeClamp,splitOnChars:c.splitOnChars||[".","-","\u2013","\u2014"," "],animate:c.animate||!1,truncationChar:c.truncationChar||"\u2026",truncationHTML:c.truncationHTML},e=a.style,l=a.innerHTML,m=void 0!==a.style.webkitLineClamp,b=d.clamp,g=b.indexOf&&(b.indexOf("px")> -1||b.indexOf("em")> -1);function t(a,b){return(s.getComputedStyle?s.getComputedStyle:function(a,b){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null},this})(a,null).getPropertyValue(b)}function h(b){var c=b||o(a),d=n(a);return Math.max(Math.floor(c/d),0)}function n(b){var a=t(b,"line-height");return"normal"==a&&(a=1.2*parseFloat(t(b,"font-size"))),parseFloat(a)}function o(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)}d.truncationHTML&&((k=document.createElement("span")).innerHTML=d.truncationHTML);var u,v,p=d.splitOnChars.slice(0),w=p[0];function q(b){return b.lastChild?b.lastChild.children&&b.lastChild.children.length>0?q(Array.prototype.slice.call(b.children).pop()):b.lastChild&&b.lastChild.nodeValue&&""!=b.lastChild.nodeValue&&b.lastChild.nodeValue!=d.truncationChar?b.lastChild:(b.lastChild.parentNode.removeChild(b.lastChild),q(a)):void 0}function r(b,c){if(b&&c){var e=b.nodeValue.replace(d.truncationChar,"");if(u||(w=p.length>0?p.shift():"",u=e.split(w)),u.length>1?(v=u.pop(),x(b,u.join(w))):u=null,k&&(b.nodeValue=b.nodeValue.replace(d.truncationChar,""),a.innerHTML=b.nodeValue+" "+k.innerHTML+d.truncationChar),u){if(o(a)<=c){if(!(p.length>=0)||""==w)return a.innerHTML;x(b,u.join(w)+w+v),u=null}}else""==w&&(x(b,""),b=q(a),w=(p=d.splitOnChars.slice(0))[0],u=null,v=null);if(!d.animate)return r(b,c);setTimeout(function(){r(b,c)},!0===d.animate?10:d.animate)}}function x(a,b){a.nodeValue=b+d.truncationChar}if("auto"==b?b=h():g&&(b=h(parseInt(b))),m&&d.useNativeClamp)e.overflow="hidden",e.textOverflow="ellipsis",e.webkitBoxOrient="vertical",e.display="-webkit-box",e.webkitLineClamp=b,g&&(e.height=d.clamp+"px");else{var i,j=(i=b,Math.ceil(n(a)*i));j<=o(a)&&(f=r(q(a),j))}return{original:l,clamped:f}}